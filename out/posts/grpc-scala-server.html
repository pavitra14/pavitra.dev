<!DOCTYPE html><html><head><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-136763629-1"></script><script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());
              
                gtag('config', 'UA-136763629-1');              
            </script><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><script type="text/javascript" src="/js/https.js"></script><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><meta property="og:title" content="Pavitra Behre | Welcome"/><meta property="og:locale" content="en_US"/><meta property="og:description" content="Web Developer, Backend Engineer, Student"/><link rel="canonical" href="index.html"/><meta property="og:url" content="https://pbehre.in/"/><meta property="og:site_name" content="Pavitra Behre | Welcome"/><link rel="preload" as="image" href="/images/profile.jpg"/><title>Using gRPC with Scala - Server Implementation</title><meta property="og:title" content="Using gRPC with Scala - Server Implementation"/><meta property="og:locale" content="en_US"/><meta name="description" content="Handling Unary, Client Side Streaming, Server Side Streaming and Bi-Directional Streaming Calls in gRPC using Scala"/><meta property="og:description" content="Handling Unary, Client Side Streaming, Server Side Streaming and Bi-Directional Streaming Calls in gRPC using Scala"/><meta name="next-head-count" content="19"/><link rel="preload" href="/_next/static/css/a44810f531e25f3baadf.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a44810f531e25f3baadf.css" data-n-g=""/><link rel="preload" href="/_next/static/css/81c0cfa4774163a95ce9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/81c0cfa4774163a95ce9.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-70a3d13ca4e9096f56de.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.9d524150d48315f49e80.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.0d52b0537d3de87cd53f.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-6a9bcfd49d1f804fffdb.js" as="script"/><link rel="preload" href="/_next/static/chunks/7989c093b81d86ddb0abfb342d5bc2e84730435d.8ee64b360d28317d7ece.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5Bid%5D-8cdd41d79c41295532c3.js" as="script"/></head><body><div id="__next"><div class="layout_container__2t4v2"><header class="layout_header__2rhWq"><a href="/"><div style="display:inline-block;max-width:100%;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="box-sizing:border-box;display:block;max-width:100%"><img style="max-width:100%;display:block;margin:0;border:none;padding:0" alt="" aria-hidden="true" role="presentation" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTA4IiBoZWlnaHQ9IjEwOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiLz4="/></div><img alt="Pavitra Behre" src="/images/profile.jpg" decoding="async" class="utils_borderCircle__13qdJ" style="visibility:inherit;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></a><h2 class="utils_headingLg__de7p0"><a class="utils_colorInherit__3Gudf" href="/">Pavitra Behre</a></h2></header><main><article><h1 class="utils_headingXl__1XecN">Using gRPC with Scala - Server Implementation</h1><div class="utils_lightText__12Ckm"><time dateTime="2021-03-27">March 27, 2021</time></div><div><h1>What is RPC?</h1>
<p><strong>Remote Procedure Call (RPC)</strong> is a powerful technique for constructing <strong>distributed, client-server based applications</strong>. It is based on extending the conventional local procedure calling so that the <strong>called procedure need not exist in the same address space as the calling procedure</strong>.</p>
<h1>What is gRPC?</h1>
<img src="https://grpc.io/img/landing-2.svg" alt="gRPC Architecture" />
<p>gRPC is a modern open source high performance RPC framework developed by Google and Introduced in 2015 that can run in any environment and communicate to any service in any supported language. It used by many major Internet Companies such as Google, Netflix, Cisco, CoreOS, Juniper etc.</p>
<p>gRPC uses <a href="https://developers.google.com/protocol-buffers">Protocol Buffers</a> as it's Interface Definition Language.</p>
<h1>Let's get started!</h1>
<p>I came upon a problem in my work where I was required to use gRPC with Scala. Being a Software Developer, I knew how to do it in Java very well, but for some engineering reasons I was asked to write the same in Scala. Scala being a JVM language makes it very easy to write very efficient code in a very short footprint. The work that takes 500 lines of code in Java can be done easily in &#x3C;100 lines in Scala. Due to lack of documentation from ScalaPB on Streaming Calls, I decided to write my on article on this.</p>
<h2>Prerequisites</h2>
<ol>
<li>Basic knowledge of Scala</li>
<li>An empty scala project set up with <a href="https://scalapb.github.io/docs/">ScalaPB</a> and <a href="https://www.scala-sbt.org/">SBT</a></li>
<li>Basic Knowledge of <a href="https://developers.google.com/protocol-buffers/docs/overview">ProtoBufs</a></li>
</ol>
<h2>Creating the Protobuf</h2>
<p>Firstly, we need a proto file containing the messages and a service. We'll create a <strong>HelloWorldProto.proto</strong> file inside <em>src/main/protobuf</em> folder.</p>
<div class="remark-highlight"><pre class="language-protobuf"><code class="language-protobuf"><span class="token keyword">syntax</span><span class="token operator">=</span><span class="token string">"proto3"</span><span class="token punctuation">;</span>
<span class="token keyword">package</span> in<span class="token punctuation">.</span>pbehre<span class="token punctuation">.</span>proto<span class="token punctuation">;</span>

<span class="token keyword">message</span> <span class="token class-name">HelloRequest</span> <span class="token punctuation">{</span>
  <span class="token builtin">string</span> name<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">message</span> <span class="token class-name">HelloResponse</span> <span class="token punctuation">{</span>
  <span class="token builtin">string</span> welcome_message<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">service</span> <span class="token class-name">HelloWorld</span> <span class="token punctuation">{</span>
  <span class="token keyword">rpc</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token class-name">HelloRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">HelloResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">rpc</span> <span class="token function">clientStream</span><span class="token punctuation">(</span><span class="token keyword">stream</span> <span class="token class-name">HelloRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">HelloResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">rpc</span> <span class="token function">serverStream</span><span class="token punctuation">(</span><span class="token class-name">HelloRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token keyword">stream</span> <span class="token class-name">HelloResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">rpc</span> <span class="token function">streamHello</span><span class="token punctuation">(</span><span class="token keyword">stream</span> <span class="token class-name">HelloRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token keyword">stream</span> <span class="token class-name">HelloResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<ul>
<li><em>HelloRequest</em> - Message to be sent as request to the server</li>
<li><em>HelloResponse</em> - Message to be sent as Response to the client</li>
<li><em>HelloWorld</em> - gRPC service containing different methods:
<ul>
<li><em>sayHello</em> - Unary Call</li>
<li><em>clientStream</em> - Client Side Streaming</li>
<li><em>serverStream</em> - Server Side Streaming</li>
<li><em>streamHello</em> - Bi-Directional Streaming</li>
</ul>
</li>
</ul>
<h2>Implementing the service - <em>HelloWorld</em></h2>
<p>Create a new file <strong>HelloService.scala</strong> in <em>src/main/scala/[your package]/</em> with the below content:</p>
<div class="remark-highlight"><pre class="language-scala"><code class="language-scala"><span class="token keyword">package</span> <span class="token namespace">in<span class="token punctuation">.</span>pbehre<span class="token punctuation">.</span>scala</span>

<span class="token keyword">import</span> <span class="token namespace">in<span class="token punctuation">.</span>pbehre<span class="token punctuation">.</span>proto<span class="token punctuation">.</span></span>HelloWorldProto<span class="token punctuation">.</span>_
<span class="token keyword">import</span> <span class="token namespace">io<span class="token punctuation">.</span>grpc<span class="token punctuation">.</span>stub<span class="token punctuation">.</span></span>StreamObserver

<span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span>Future

<span class="token keyword">class</span> HelloService <span class="token keyword">extends</span> HelloWorldGrpc <span class="token punctuation">.</span>HelloWorld <span class="token punctuation">{</span>
	<span class="token comment">//Service to implement calls</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>This is the basic service structure, needs to extend the HelloWorldGrpc.HelloWorld Base Implementation Class. Let's go ahead and override the methods</p>
<h3>Unary Call - sayHello</h3>
<p>This call takes a single <em>HelloRequest</em> Object and Returns a <em>Future</em> with <em>HelloResponse</em> Object.</p>
<div class="remark-highlight"><pre class="language-scala"><code class="language-scala"><span class="token keyword">override</span> <span class="token keyword">def</span> sayHello<span class="token punctuation">(</span>request<span class="token operator">:</span> HelloRequest<span class="token punctuation">)</span><span class="token operator">:</span> Future<span class="token punctuation">[</span>HelloResponse<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> name <span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> request<span class="token punctuation">.</span>name
    <span class="token keyword">val</span> reply <span class="token operator">=</span> HelloResponse<span class="token punctuation">(</span>welcomeMessage <span class="token operator">=</span> <span class="token string">"Welcome, "</span> <span class="token operator">+</span> name<span class="token punctuation">)</span>
    Future<span class="token punctuation">.</span>successful<span class="token punctuation">(</span>reply<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div>
<h3>Client Side Streaming - clientStream</h3>
<p>This will take a stream of objects from the client in a request observer, and then return them back to the client once the stream is end/committed in a single <em>HelloResponse</em> Object. Only one request session is used to stream content to the server.</p>
<div class="remark-highlight"><pre class="language-scala"><code class="language-scala"><span class="token keyword">override</span> <span class="token keyword">def</span> clientStream<span class="token punctuation">(</span>responseObserver<span class="token operator">:</span> StreamObserver<span class="token punctuation">[</span>HelloResponse<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> StreamObserver<span class="token punctuation">[</span>HelloRequest<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> count<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">var</span> names<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token string">""</span>
    <span class="token keyword">val</span> requestObserver<span class="token operator">:</span> StreamObserver<span class="token punctuation">[</span>HelloRequest<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> StreamObserver<span class="token punctuation">[</span>HelloRequest<span class="token punctuation">]</span> <span class="token punctuation">{</span>
      <span class="token keyword">override</span> <span class="token keyword">def</span> onNext<span class="token punctuation">(</span>value<span class="token operator">:</span> HelloRequest<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        println<span class="token punctuation">(</span><span class="token string">"Received request: "</span> <span class="token operator">+</span> value<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
        count <span class="token operator">=</span> count <span class="token operator">+</span> <span class="token number">1</span>
        names<span class="token operator">+=</span> value<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">", "</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">override</span> <span class="token keyword">def</span> onError<span class="token punctuation">(</span>t<span class="token operator">:</span> Throwable<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        println<span class="token punctuation">(</span>t<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">override</span> <span class="token keyword">def</span> onCompleted<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        responseObserver<span class="token punctuation">.</span>onNext<span class="token punctuation">(</span>HelloResponse<span class="token punctuation">(</span><span class="token string">"Welcome, "</span> <span class="token operator">+</span> names <span class="token operator">+</span> <span class="token string">"\nTotal Count: "</span> <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">)</span>
        responseObserver<span class="token punctuation">.</span>onCompleted<span class="token punctuation">(</span><span class="token punctuation">)</span>
        println<span class="token punctuation">(</span><span class="token string">"clientStream::onCompleted()"</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    requestObserver
  <span class="token punctuation">}</span>
</code></pre></div>
<h3>Server Side Streaming - serverStream</h3>
<p>Will take a single request <em>HelloRequest</em> object which will establish the request and thanks to http2.0, the grpc function will return a multiple stream of <em>HelloResponse</em> object in the same request.</p>
<div class="remark-highlight"><pre class="language-scala"><code class="language-scala"><span class="token keyword">override</span> <span class="token keyword">def</span> serverStream<span class="token punctuation">(</span>request<span class="token operator">:</span> HelloRequest<span class="token punctuation">,</span> responseObserver<span class="token operator">:</span> StreamObserver<span class="token punctuation">[</span>HelloResponse<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> values <span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span>
      <span class="token string">"First Stream packet"</span><span class="token punctuation">,</span>
      <span class="token string">"Second stream packet"</span><span class="token punctuation">,</span>
      <span class="token string">"Third Stream packet"</span><span class="token punctuation">,</span>
      <span class="token string">"Fourth Stream packet"</span>
    <span class="token punctuation">)</span>
    values<span class="token punctuation">.</span>foreach<span class="token punctuation">(</span>s <span class="token keyword">=></span> responseObserver<span class="token punctuation">.</span>onNext<span class="token punctuation">(</span>HelloResponse<span class="token punctuation">(</span>welcomeMessage <span class="token operator">=</span> s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    responseObserver<span class="token punctuation">.</span>onCompleted<span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div>
<h3>Bi-Directional Streaming - streamHello</h3>
<p>Takes a stream of <em>HelloRequest</em> Objects and returns a stream of <em>HelloResponse</em> objects</p>
<div class="remark-highlight"><pre class="language-scala"><code class="language-scala"><span class="token keyword">override</span> <span class="token keyword">def</span> streamHello<span class="token punctuation">(</span>responseObserver<span class="token operator">:</span> StreamObserver<span class="token punctuation">[</span>HelloResponse<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> StreamObserver<span class="token punctuation">[</span>HelloRequest<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> requestObserver<span class="token operator">:</span> StreamObserver<span class="token punctuation">[</span>HelloRequest<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> StreamObserver<span class="token punctuation">[</span>HelloRequest<span class="token punctuation">]</span> <span class="token punctuation">{</span>
      <span class="token keyword">override</span> <span class="token keyword">def</span> onNext<span class="token punctuation">(</span>value<span class="token operator">:</span> HelloRequest<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        println<span class="token punctuation">(</span><span class="token string">"Received a Request: "</span> <span class="token operator">+</span> value<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
        responseObserver<span class="token punctuation">.</span>onNext<span class="token punctuation">(</span>HelloResponse<span class="token punctuation">(</span>welcomeMessage <span class="token operator">=</span> <span class="token string">"Hello World, "</span> <span class="token operator">+</span> value<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>


      <span class="token keyword">override</span> <span class="token keyword">def</span> onError<span class="token punctuation">(</span>t<span class="token operator">:</span> Throwable<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        println<span class="token punctuation">(</span>t<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">override</span> <span class="token keyword">def</span> onCompleted<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        println<span class="token punctuation">(</span><span class="token string">"Service completed"</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    requestObserver
  <span class="token punctuation">}</span>
</code></pre></div>
<h4>That's it!</h4>
<h4>Your final file service file should look like:</h4>
<div class="remark-highlight"><pre class="language-scala"><code class="language-scala"><span class="token keyword">package</span> <span class="token namespace">in<span class="token punctuation">.</span>pbehre<span class="token punctuation">.</span>scala</span>

<span class="token keyword">import</span> <span class="token namespace">in<span class="token punctuation">.</span>pbehre<span class="token punctuation">.</span>proto<span class="token punctuation">.</span></span>HelloWorldProto<span class="token punctuation">.</span>_
<span class="token keyword">import</span> <span class="token namespace">io<span class="token punctuation">.</span>grpc<span class="token punctuation">.</span>stub<span class="token punctuation">.</span></span>StreamObserver

<span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span>Future

<span class="token keyword">class</span> HelloService <span class="token keyword">extends</span> HelloWorldGrpc <span class="token punctuation">.</span>HelloWorld <span class="token punctuation">{</span>
  <span class="token keyword">override</span> <span class="token keyword">def</span> sayHello<span class="token punctuation">(</span>request<span class="token operator">:</span> HelloRequest<span class="token punctuation">)</span><span class="token operator">:</span> Future<span class="token punctuation">[</span>HelloResponse<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> name <span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> request<span class="token punctuation">.</span>name
    <span class="token keyword">val</span> reply <span class="token operator">=</span> HelloResponse<span class="token punctuation">(</span>welcomeMessage <span class="token operator">=</span> <span class="token string">"Welcome, "</span> <span class="token operator">+</span> name<span class="token punctuation">)</span>
    Future<span class="token punctuation">.</span>successful<span class="token punctuation">(</span>reply<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">override</span> <span class="token keyword">def</span> streamHello<span class="token punctuation">(</span>responseObserver<span class="token operator">:</span> StreamObserver<span class="token punctuation">[</span>HelloResponse<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> StreamObserver<span class="token punctuation">[</span>HelloRequest<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> requestObserver<span class="token operator">:</span> StreamObserver<span class="token punctuation">[</span>HelloRequest<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> StreamObserver<span class="token punctuation">[</span>HelloRequest<span class="token punctuation">]</span> <span class="token punctuation">{</span>
      <span class="token keyword">override</span> <span class="token keyword">def</span> onNext<span class="token punctuation">(</span>value<span class="token operator">:</span> HelloRequest<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        println<span class="token punctuation">(</span><span class="token string">"Received a Request: "</span> <span class="token operator">+</span> value<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
        responseObserver<span class="token punctuation">.</span>onNext<span class="token punctuation">(</span>HelloResponse<span class="token punctuation">(</span>welcomeMessage <span class="token operator">=</span> <span class="token string">"Hello World, "</span> <span class="token operator">+</span> value<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>


      <span class="token keyword">override</span> <span class="token keyword">def</span> onError<span class="token punctuation">(</span>t<span class="token operator">:</span> Throwable<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        println<span class="token punctuation">(</span>t<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">override</span> <span class="token keyword">def</span> onCompleted<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        println<span class="token punctuation">(</span><span class="token string">"Service completed"</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    requestObserver
  <span class="token punctuation">}</span>

  <span class="token keyword">override</span> <span class="token keyword">def</span> clientStream<span class="token punctuation">(</span>responseObserver<span class="token operator">:</span> StreamObserver<span class="token punctuation">[</span>HelloResponse<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> StreamObserver<span class="token punctuation">[</span>HelloRequest<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> count<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">var</span> names<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token string">""</span>
    <span class="token keyword">val</span> requestObserver<span class="token operator">:</span> StreamObserver<span class="token punctuation">[</span>HelloRequest<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> StreamObserver<span class="token punctuation">[</span>HelloRequest<span class="token punctuation">]</span> <span class="token punctuation">{</span>
      <span class="token keyword">override</span> <span class="token keyword">def</span> onNext<span class="token punctuation">(</span>value<span class="token operator">:</span> HelloRequest<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        println<span class="token punctuation">(</span><span class="token string">"Received request: "</span> <span class="token operator">+</span> value<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
        count <span class="token operator">=</span> count <span class="token operator">+</span> <span class="token number">1</span>
        names<span class="token operator">+=</span> value<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">", "</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">override</span> <span class="token keyword">def</span> onError<span class="token punctuation">(</span>t<span class="token operator">:</span> Throwable<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        println<span class="token punctuation">(</span>t<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">override</span> <span class="token keyword">def</span> onCompleted<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        responseObserver<span class="token punctuation">.</span>onNext<span class="token punctuation">(</span>HelloResponse<span class="token punctuation">(</span><span class="token string">"Welcome, "</span> <span class="token operator">+</span> names <span class="token operator">+</span> <span class="token string">"\nTotal Count: "</span> <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">)</span>
        responseObserver<span class="token punctuation">.</span>onCompleted<span class="token punctuation">(</span><span class="token punctuation">)</span>
        println<span class="token punctuation">(</span><span class="token string">"clientStream::onCompleted()"</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    requestObserver
  <span class="token punctuation">}</span>

  <span class="token keyword">override</span> <span class="token keyword">def</span> serverStream<span class="token punctuation">(</span>request<span class="token operator">:</span> HelloRequest<span class="token punctuation">,</span> responseObserver<span class="token operator">:</span> StreamObserver<span class="token punctuation">[</span>HelloResponse<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> values <span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span>
      <span class="token string">"First Stream packet"</span><span class="token punctuation">,</span>
      <span class="token string">"Second stream packet"</span><span class="token punctuation">,</span>
      <span class="token string">"Third Stream packet"</span><span class="token punctuation">,</span>
      <span class="token string">"Fourth Stream packet"</span>
    <span class="token punctuation">)</span>

    values<span class="token punctuation">.</span>foreach<span class="token punctuation">(</span>s <span class="token keyword">=></span> responseObserver<span class="token punctuation">.</span>onNext<span class="token punctuation">(</span>HelloResponse<span class="token punctuation">(</span>welcomeMessage <span class="token operator">=</span> s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    responseObserver<span class="token punctuation">.</span>onCompleted<span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<h4></h4>
<h2>Implementing the GRPC Server</h2>
<p>Create a new file <strong>HelloServer.scala</strong> in <em>src/main/scala/[your package]/</em> with the below content:</p>
<div class="remark-highlight"><pre class="language-scala"><code class="language-scala"><span class="token keyword">package</span> <span class="token namespace">in<span class="token punctuation">.</span>pbehre<span class="token punctuation">.</span>scala</span>


<span class="token keyword">import</span> <span class="token namespace">in<span class="token punctuation">.</span>pbehre<span class="token punctuation">.</span>proto<span class="token punctuation">.</span></span>HelloWorldProto<span class="token punctuation">.</span>_

<span class="token keyword">import</span> <span class="token namespace">io<span class="token punctuation">.</span>grpc<span class="token punctuation">.</span></span><span class="token punctuation">{</span>Server<span class="token punctuation">,</span> ServerBuilder<span class="token punctuation">}</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>logging<span class="token punctuation">.</span></span><span class="token punctuation">{</span>LogManager<span class="token punctuation">,</span> Logger<span class="token punctuation">}</span>
<span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span>ExecutionContext

<span class="token keyword">object</span> App <span class="token punctuation">{</span>
  <span class="token keyword">val</span> logger<span class="token operator">:</span> Logger <span class="token operator">=</span> Logger<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span>classOf<span class="token punctuation">[</span>App<span class="token punctuation">]</span><span class="token punctuation">.</span>getName<span class="token punctuation">)</span>
  <span class="token keyword">val</span> port <span class="token operator">=</span> <span class="token number">50051</span>

  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> server <span class="token operator">=</span> <span class="token keyword">new</span> HelloWorldServer<span class="token punctuation">(</span>ExecutionContext<span class="token punctuation">.</span>global<span class="token punctuation">)</span>
    server<span class="token punctuation">.</span>start
    server<span class="token punctuation">.</span>blockUntilShutdown
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> HelloWorldServer<span class="token punctuation">(</span>executionContext<span class="token operator">:</span> ExecutionContext<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">self</span> <span class="token keyword">=></span>
  <span class="token keyword">private</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">]</span> <span class="token keyword">var</span> server<span class="token operator">:</span> Server <span class="token operator">=</span> <span class="token keyword">null</span>

  <span class="token keyword">def</span> start<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    server <span class="token operator">=</span> ServerBuilder
      <span class="token punctuation">.</span>forPort<span class="token punctuation">(</span>App<span class="token punctuation">.</span>port<span class="token punctuation">)</span>
      <span class="token punctuation">.</span>addService<span class="token punctuation">(</span>HelloWorldGrpc<span class="token punctuation">.</span>bindService<span class="token punctuation">(</span><span class="token keyword">new</span> HelloService<span class="token punctuation">,</span> executionContext<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span>build<span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
    App<span class="token punctuation">.</span>logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">"Starting server on port: "</span> <span class="token operator">+</span> App<span class="token punctuation">.</span>port<span class="token punctuation">)</span>
    sys<span class="token punctuation">.</span>addShutdownHook <span class="token punctuation">{</span>
      System<span class="token punctuation">.</span>err<span class="token punctuation">.</span>println<span class="token punctuation">(</span><span class="token string">"*** shutting down gRPC server since JVM is shutting down"</span><span class="token punctuation">)</span>
      <span class="token keyword">self</span><span class="token punctuation">.</span>stop<span class="token punctuation">(</span><span class="token punctuation">)</span>
      System<span class="token punctuation">.</span>err<span class="token punctuation">.</span>println<span class="token punctuation">(</span><span class="token string">"*** server shut down"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">def</span> stop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>server <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      server<span class="token punctuation">.</span>shutdown<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">def</span> blockUntilShutdown<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>server <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      server<span class="token punctuation">.</span>awaitTermination<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<h4>That's it! You're done with the code.</h4>
<p>Client Implementation coming soon!</p>
<p>You can find the code and a sample project in this repository: <a href="https://github.com/pavitra14/grpc_hello_server">Github</a></p>
</div></article><a href="https://www.buymeacoffee.com/HOZtmqr" target="_blank"><div style="display:inline-block;max-width:100%;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="box-sizing:border-box;display:block;max-width:100%"><img style="max-width:100%;display:block;margin:0;border:none;padding:0" alt="" aria-hidden="true" role="presentation" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjE3IiBoZWlnaHQ9IjYwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIvPg=="/></div><img alt="Buy Me A Coffee" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></a></main><div class="layout_backToHome__1vZsp"><a href="/">‚Üê Back to home</a></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"grpc-scala-server","contentHtml":"\u003ch1\u003eWhat is RPC?\u003c/h1\u003e\n\u003cp\u003e\u003cstrong\u003eRemote Procedure Call (RPC)\u003c/strong\u003e is a powerful technique for constructing \u003cstrong\u003edistributed, client-server based applications\u003c/strong\u003e. It is based on extending the conventional local procedure calling so that the \u003cstrong\u003ecalled procedure need not exist in the same address space as the calling procedure\u003c/strong\u003e.\u003c/p\u003e\n\u003ch1\u003eWhat is gRPC?\u003c/h1\u003e\n\u003cimg src=\"https://grpc.io/img/landing-2.svg\" alt=\"gRPC Architecture\" /\u003e\n\u003cp\u003egRPC is a modern open source high performance RPC framework developed by Google and Introduced in 2015 that can run in any environment and communicate to any service in any supported language. It used by many major Internet Companies such as Google, Netflix, Cisco, CoreOS, Juniper etc.\u003c/p\u003e\n\u003cp\u003egRPC uses \u003ca href=\"https://developers.google.com/protocol-buffers\"\u003eProtocol Buffers\u003c/a\u003e as it's Interface Definition Language.\u003c/p\u003e\n\u003ch1\u003eLet's get started!\u003c/h1\u003e\n\u003cp\u003eI came upon a problem in my work where I was required to use gRPC with Scala. Being a Software Developer, I knew how to do it in Java very well, but for some engineering reasons I was asked to write the same in Scala. Scala being a JVM language makes it very easy to write very efficient code in a very short footprint. The work that takes 500 lines of code in Java can be done easily in \u0026#x3C;100 lines in Scala. Due to lack of documentation from ScalaPB on Streaming Calls, I decided to write my on article on this.\u003c/p\u003e\n\u003ch2\u003ePrerequisites\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003eBasic knowledge of Scala\u003c/li\u003e\n\u003cli\u003eAn empty scala project set up with \u003ca href=\"https://scalapb.github.io/docs/\"\u003eScalaPB\u003c/a\u003e and \u003ca href=\"https://www.scala-sbt.org/\"\u003eSBT\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eBasic Knowledge of \u003ca href=\"https://developers.google.com/protocol-buffers/docs/overview\"\u003eProtoBufs\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003eCreating the Protobuf\u003c/h2\u003e\n\u003cp\u003eFirstly, we need a proto file containing the messages and a service. We'll create a \u003cstrong\u003eHelloWorldProto.proto\u003c/strong\u003e file inside \u003cem\u003esrc/main/protobuf\u003c/em\u003e folder.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-protobuf\"\u003e\u003ccode class=\"language-protobuf\"\u003e\u003cspan class=\"token keyword\"\u003esyntax\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"proto3\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003epackage\u003c/span\u003e in\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003epbehre\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eproto\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003emessage\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eHelloRequest\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token builtin\"\u003estring\u003c/span\u003e name\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003emessage\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eHelloResponse\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token builtin\"\u003estring\u003c/span\u003e welcome_message\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eservice\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eHelloWorld\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003erpc\u003c/span\u003e \u003cspan class=\"token function\"\u003esayHello\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eHelloRequest\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ereturns\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eHelloResponse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003erpc\u003c/span\u003e \u003cspan class=\"token function\"\u003eclientStream\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003estream\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eHelloRequest\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ereturns\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eHelloResponse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003erpc\u003c/span\u003e \u003cspan class=\"token function\"\u003eserverStream\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eHelloRequest\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ereturns\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003estream\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eHelloResponse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003erpc\u003c/span\u003e \u003cspan class=\"token function\"\u003estreamHello\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003estream\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eHelloRequest\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ereturns\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003estream\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eHelloResponse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cem\u003eHelloRequest\u003c/em\u003e - Message to be sent as request to the server\u003c/li\u003e\n\u003cli\u003e\u003cem\u003eHelloResponse\u003c/em\u003e - Message to be sent as Response to the client\u003c/li\u003e\n\u003cli\u003e\u003cem\u003eHelloWorld\u003c/em\u003e - gRPC service containing different methods:\n\u003cul\u003e\n\u003cli\u003e\u003cem\u003esayHello\u003c/em\u003e - Unary Call\u003c/li\u003e\n\u003cli\u003e\u003cem\u003eclientStream\u003c/em\u003e - Client Side Streaming\u003c/li\u003e\n\u003cli\u003e\u003cem\u003eserverStream\u003c/em\u003e - Server Side Streaming\u003c/li\u003e\n\u003cli\u003e\u003cem\u003estreamHello\u003c/em\u003e - Bi-Directional Streaming\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eImplementing the service - \u003cem\u003eHelloWorld\u003c/em\u003e\u003c/h2\u003e\n\u003cp\u003eCreate a new file \u003cstrong\u003eHelloService.scala\u003c/strong\u003e in \u003cem\u003esrc/main/scala/[your package]/\u003c/em\u003e with the below content:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-scala\"\u003e\u003ccode class=\"language-scala\"\u003e\u003cspan class=\"token keyword\"\u003epackage\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ein\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003epbehre\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003escala\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ein\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003epbehre\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eproto\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003c/span\u003eHelloWorldProto\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e_\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token namespace\"\u003eio\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003egrpc\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003estub\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003c/span\u003eStreamObserver\n\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token namespace\"\u003escala\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003econcurrent\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003c/span\u003eFuture\n\n\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e HelloService \u003cspan class=\"token keyword\"\u003eextends\u003c/span\u003e HelloWorldGrpc \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eHelloWorld \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\t\u003cspan class=\"token comment\"\u003e//Service to implement calls\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThis is the basic service structure, needs to extend the HelloWorldGrpc.HelloWorld Base Implementation Class. Let's go ahead and override the methods\u003c/p\u003e\n\u003ch3\u003eUnary Call - sayHello\u003c/h3\u003e\n\u003cp\u003eThis call takes a single \u003cem\u003eHelloRequest\u003c/em\u003e Object and Returns a \u003cem\u003eFuture\u003c/em\u003e with \u003cem\u003eHelloResponse\u003c/em\u003e Object.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-scala\"\u003e\u003ccode class=\"language-scala\"\u003e\u003cspan class=\"token keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e sayHello\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003erequest\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e HelloRequest\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e Future\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eHelloResponse\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eval\u003c/span\u003e name \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eString\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e request\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\n    \u003cspan class=\"token keyword\"\u003eval\u003c/span\u003e reply \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e HelloResponse\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ewelcomeMessage \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Welcome, \"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    Future\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esuccessful\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ereply\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3\u003eClient Side Streaming - clientStream\u003c/h3\u003e\n\u003cp\u003eThis will take a stream of objects from the client in a request observer, and then return them back to the client once the stream is end/committed in a single \u003cem\u003eHelloResponse\u003c/em\u003e Object. Only one request session is used to stream content to the server.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-scala\"\u003e\u003ccode class=\"language-scala\"\u003e\u003cspan class=\"token keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e clientStream\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eresponseObserver\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e StreamObserver\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eHelloResponse\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e StreamObserver\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eHelloRequest\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e count\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eInt\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e names\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eString\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\"\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eval\u003c/span\u003e requestObserver\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e StreamObserver\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eHelloRequest\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e StreamObserver\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eHelloRequest\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e onNext\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003evalue\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e HelloRequest\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eUnit\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        println\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Received request: \"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e value\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        count \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e count \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\n        names\u003cspan class=\"token operator\"\u003e+=\u003c/span\u003e value\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token string\"\u003e\", \"\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e onError\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003et\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e Throwable\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eUnit\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        println\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003et\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e onCompleted\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eUnit\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        responseObserver\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eonNext\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eHelloResponse\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Welcome, \"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e names \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\\nTotal Count: \"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e count\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        responseObserver\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eonCompleted\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        println\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"clientStream::onCompleted()\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    requestObserver\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3\u003eServer Side Streaming - serverStream\u003c/h3\u003e\n\u003cp\u003eWill take a single request \u003cem\u003eHelloRequest\u003c/em\u003e object which will establish the request and thanks to http2.0, the grpc function will return a multiple stream of \u003cem\u003eHelloResponse\u003c/em\u003e object in the same request.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-scala\"\u003e\u003ccode class=\"language-scala\"\u003e\u003cspan class=\"token keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e serverStream\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003erequest\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e HelloRequest\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e responseObserver\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e StreamObserver\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eHelloResponse\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eUnit\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eval\u003c/span\u003e values \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e List\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e List\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n      \u003cspan class=\"token string\"\u003e\"First Stream packet\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"token string\"\u003e\"Second stream packet\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"token string\"\u003e\"Third Stream packet\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"token string\"\u003e\"Fourth Stream packet\"\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    values\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eforeach\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003es \u003cspan class=\"token keyword\"\u003e=\u003e\u003c/span\u003e responseObserver\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eonNext\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eHelloResponse\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ewelcomeMessage \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e s\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    responseObserver\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eonCompleted\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3\u003eBi-Directional Streaming - streamHello\u003c/h3\u003e\n\u003cp\u003eTakes a stream of \u003cem\u003eHelloRequest\u003c/em\u003e Objects and returns a stream of \u003cem\u003eHelloResponse\u003c/em\u003e objects\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-scala\"\u003e\u003ccode class=\"language-scala\"\u003e\u003cspan class=\"token keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e streamHello\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eresponseObserver\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e StreamObserver\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eHelloResponse\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e StreamObserver\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eHelloRequest\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eval\u003c/span\u003e requestObserver\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e StreamObserver\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eHelloRequest\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e StreamObserver\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eHelloRequest\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e onNext\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003evalue\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e HelloRequest\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eUnit\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        println\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Received a Request: \"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e value\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        responseObserver\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eonNext\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eHelloResponse\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ewelcomeMessage \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Hello World, \"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e value\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\n      \u003cspan class=\"token keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e onError\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003et\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e Throwable\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eUnit\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        println\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003et\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n      \u003cspan class=\"token keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e onCompleted\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eUnit\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        println\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Service completed\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    requestObserver\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch4\u003eThat's it!\u003c/h4\u003e\n\u003ch4\u003eYour final file service file should look like:\u003c/h4\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-scala\"\u003e\u003ccode class=\"language-scala\"\u003e\u003cspan class=\"token keyword\"\u003epackage\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ein\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003epbehre\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003escala\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ein\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003epbehre\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eproto\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003c/span\u003eHelloWorldProto\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e_\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token namespace\"\u003eio\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003egrpc\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003estub\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003c/span\u003eStreamObserver\n\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token namespace\"\u003escala\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003econcurrent\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003c/span\u003eFuture\n\n\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e HelloService \u003cspan class=\"token keyword\"\u003eextends\u003c/span\u003e HelloWorldGrpc \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eHelloWorld \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e sayHello\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003erequest\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e HelloRequest\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e Future\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eHelloResponse\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eval\u003c/span\u003e name \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eString\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e request\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\n    \u003cspan class=\"token keyword\"\u003eval\u003c/span\u003e reply \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e HelloResponse\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ewelcomeMessage \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Welcome, \"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    Future\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esuccessful\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ereply\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n  \u003cspan class=\"token keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e streamHello\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eresponseObserver\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e StreamObserver\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eHelloResponse\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e StreamObserver\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eHelloRequest\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eval\u003c/span\u003e requestObserver\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e StreamObserver\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eHelloRequest\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e StreamObserver\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eHelloRequest\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e onNext\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003evalue\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e HelloRequest\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eUnit\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        println\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Received a Request: \"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e value\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        responseObserver\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eonNext\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eHelloResponse\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ewelcomeMessage \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Hello World, \"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e value\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\n      \u003cspan class=\"token keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e onError\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003et\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e Throwable\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eUnit\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        println\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003et\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n      \u003cspan class=\"token keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e onCompleted\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eUnit\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        println\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Service completed\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    requestObserver\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n  \u003cspan class=\"token keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e clientStream\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eresponseObserver\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e StreamObserver\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eHelloResponse\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e StreamObserver\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eHelloRequest\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e count\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eInt\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e names\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eString\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\"\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eval\u003c/span\u003e requestObserver\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e StreamObserver\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eHelloRequest\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e StreamObserver\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eHelloRequest\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e onNext\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003evalue\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e HelloRequest\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eUnit\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        println\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Received request: \"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e value\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        count \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e count \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\n        names\u003cspan class=\"token operator\"\u003e+=\u003c/span\u003e value\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token string\"\u003e\", \"\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n      \u003cspan class=\"token keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e onError\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003et\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e Throwable\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eUnit\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        println\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003et\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n      \u003cspan class=\"token keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e onCompleted\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eUnit\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        responseObserver\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eonNext\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eHelloResponse\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Welcome, \"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e names \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\\nTotal Count: \"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e count\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        responseObserver\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eonCompleted\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        println\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"clientStream::onCompleted()\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    requestObserver\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n  \u003cspan class=\"token keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e serverStream\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003erequest\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e HelloRequest\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e responseObserver\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e StreamObserver\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eHelloResponse\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eUnit\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eval\u003c/span\u003e values \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e List\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e List\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n      \u003cspan class=\"token string\"\u003e\"First Stream packet\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"token string\"\u003e\"Second stream packet\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"token string\"\u003e\"Third Stream packet\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"token string\"\u003e\"Fourth Stream packet\"\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n    values\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eforeach\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003es \u003cspan class=\"token keyword\"\u003e=\u003e\u003c/span\u003e responseObserver\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eonNext\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eHelloResponse\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ewelcomeMessage \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e s\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    responseObserver\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eonCompleted\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch4\u003e\u003c/h4\u003e\n\u003ch2\u003eImplementing the GRPC Server\u003c/h2\u003e\n\u003cp\u003eCreate a new file \u003cstrong\u003eHelloServer.scala\u003c/strong\u003e in \u003cem\u003esrc/main/scala/[your package]/\u003c/em\u003e with the below content:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-scala\"\u003e\u003ccode class=\"language-scala\"\u003e\u003cspan class=\"token keyword\"\u003epackage\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ein\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003epbehre\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003escala\u003c/span\u003e\n\n\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ein\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003epbehre\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eproto\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003c/span\u003eHelloWorldProto\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e_\n\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token namespace\"\u003eio\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003egrpc\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eServer\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ServerBuilder\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ejava\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eutil\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003elogging\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eLogManager\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e Logger\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token namespace\"\u003escala\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003econcurrent\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003c/span\u003eExecutionContext\n\n\u003cspan class=\"token keyword\"\u003eobject\u003c/span\u003e App \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003eval\u003c/span\u003e logger\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e Logger \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Logger\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003egetLogger\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eclassOf\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eApp\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003egetName\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003eval\u003c/span\u003e port \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e50051\u003c/span\u003e\n\n  \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e main\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eargs\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e Array\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eUnit\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eval\u003c/span\u003e server \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e HelloWorldServer\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eExecutionContext\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eglobal\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    server\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003estart\n    server\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eblockUntilShutdown\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e HelloWorldServer\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eexecutionContext\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e ExecutionContext\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e \u003cspan class=\"token keyword\"\u003e=\u003e\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e server\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e Server \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\n\n  \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e start\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eUnit\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    server \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e ServerBuilder\n      \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eforPort\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eApp\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eport\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eaddService\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eHelloWorldGrpc\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ebindService\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e HelloService\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e executionContext\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ebuild\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003estart\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    App\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003elogger\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003einfo\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Starting server on port: \"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e App\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eport\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    sys\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eaddShutdownHook \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      System\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eerr\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eprintln\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"*** shutting down gRPC server since JVM is shutting down\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003estop\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      System\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eerr\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eprintln\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"*** server shut down\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e stop\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eUnit\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eserver \u003cspan class=\"token operator\"\u003e!=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      server\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eshutdown\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n  \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e blockUntilShutdown\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eUnit\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eserver \u003cspan class=\"token operator\"\u003e!=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      server\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eawaitTermination\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch4\u003eThat's it! You're done with the code.\u003c/h4\u003e\n\u003cp\u003eClient Implementation coming soon!\u003c/p\u003e\n\u003cp\u003eYou can find the code and a sample project in this repository: \u003ca href=\"https://github.com/pavitra14/grpc_hello_server\"\u003eGithub\u003c/a\u003e\u003c/p\u003e\n","title":"Using gRPC with Scala - Server Implementation","date":"2021-03-27","excerpt":"Handling Unary, Client Side Streaming, Server Side Streaming and Bi-Directional Streaming Calls in gRPC using Scala"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"grpc-scala-server"},"buildId":"E6lSMWtTiWACVUlii-2pt","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-8f31809deb7932dd0187.js"></script><script src="/_next/static/chunks/main-70a3d13ca4e9096f56de.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.9d524150d48315f49e80.js" async=""></script><script src="/_next/static/chunks/commons.0d52b0537d3de87cd53f.js" async=""></script><script src="/_next/static/chunks/pages/_app-6a9bcfd49d1f804fffdb.js" async=""></script><script src="/_next/static/chunks/7989c093b81d86ddb0abfb342d5bc2e84730435d.8ee64b360d28317d7ece.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-8cdd41d79c41295532c3.js" async=""></script><script src="/_next/static/E6lSMWtTiWACVUlii-2pt/_buildManifest.js" async=""></script><script src="/_next/static/E6lSMWtTiWACVUlii-2pt/_ssgManifest.js" async=""></script></body></html>